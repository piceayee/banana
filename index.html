<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>é¦™è•‰æ°£è±¡åƒæ•¸å‹ä¿éšªè©¦ç®—å·¥å…·</title>
  <style>
    body { font-family: sans-serif; padding: 2em; background: #f9f9f9; }
    input { padding: 4px; width: 80px; margin: 2px; }
    table { border-collapse: collapse; margin-top: 1em; }
    td, th { border: 1px solid #ccc; padding: 6px; text-align: center; }
    h2 { margin-bottom: 0.5em; }
  </style>
</head>
<body>
  <h2>ğŸŒ é¦™è•‰æ°£è±¡åƒæ•¸å‹ä¿éšªè©¦ç®—å·¥å…·</h2>
  <div>
    <label>æ­·å²é¢±é¢¨ç¸½æ¬¡æ•¸ï¼š<input id="totalTyphoons" type="number" /></label>
    <label>æ­·å²å¹´æ•¸ï¼š<input id="years" type="number" /></label>
    <label>ä¿éšªé‡‘é¡ï¼ˆå…ƒï¼‰ï¼š<input id="sumInsured" type="number" /></label>
  </div>

  <table>
    <thead>
      <tr>
        <th>ç´šé¢¨</th>
        <th>è³ ä»˜æ¯”ä¾‹ (%)</th>
        <th>è©²ç´šé¢¨å‡ºç¾æ¬¡æ•¸</th>
      </tr>
    </thead>
    <tbody id="windTable">
      <!-- å‹•æ…‹ç”¢ç”Ÿ -->
    </tbody>
  </table>

  <button onclick="calculate()">è¨ˆç®—</button>

  <h3>è¨ˆç®—çµæœ</h3>
  <div id="result">å°šæœªè¨ˆç®—</div>

  <script>
    const levels = Array.from({ length: 12 }, (_, i) => i + 7); // 7~18ç´šé¢¨

    const windTable = document.getElementById("windTable");
    levels.forEach(level => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${level}</td>
        <td><input type="number" id="rate-${level}" placeholder="%" /></td>
        <td><input type="number" id="freq-${level}" placeholder="æ¬¡æ•¸" /></td>
      `;
      windTable.appendChild(row);
    });

    function calculate() {
      const totalTyphoons = parseFloat(document.getElementById("totalTyphoons").value) || 0;
      const years = parseFloat(document.getElementById("years").value) || 1;
      const sumInsured = parseFloat(document.getElementById("sumInsured").value) || 0;

      const avgTyphoonsPerYear = totalTyphoons / years;
      let expectedLossPerTyphoon = 0;

      levels.forEach(level => {
        const rate = parseFloat(document.getElementById(`rate-${level}`).value) || 0;
        const freq = parseFloat(document.getElementById(`freq-${level}`).value) || 0;
        const payout = (sumInsured * rate) / 100;
        expectedLossPerTyphoon += (freq / totalTyphoons) * payout;
      });

      const annualPurePremium = avgTyphoonsPerYear * expectedLossPerTyphoon;

      document.getElementById("result").innerHTML = `
        â¤ å¹´å¹³å‡é¢±é¢¨æ•¸ï¼š${avgTyphoonsPerYear.toFixed(2)}<br/>
        â¤ æ¯æ¬¡é¢±é¢¨å¹³å‡æå¤±ï¼š${expectedLossPerTyphoon.toFixed(0)} å…ƒ<br/>
        â¤ å¹´ç´”ä¿è²»ï¼š${annualPurePremium.toFixed(0)} å…ƒ
      `;
    }
  </script>
</body>
</html>
